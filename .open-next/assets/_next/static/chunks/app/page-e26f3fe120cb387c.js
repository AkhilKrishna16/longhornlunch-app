(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5997:function(e,t,a){Promise.resolve().then(a.bind(a,6186))},6186:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var r=a(7437),n=a(2265),s=a(9582),l=e=>{let{dates:t,selectedDate:a,onDateChange:l}=e,o=(0,n.useRef)([]),c=(0,n.useRef)([]);(0,n.useEffect)(()=>{o.current=o.current.slice(0,t.length),c.current=c.current.slice(0,t.length)},[t]);let i=e=>{c.current[e]&&(s.ZP.to(c.current[e],{duration:.7,scaleX:1,ease:"power2.out"}),s.ZP.to(o.current[e],{duration:.7,scale:1.1,ease:"power2.out",backgroundColor:"#212121",color:"#212121"}))},d=e=>{c.current[e]&&(s.ZP.to(c.current[e],{duration:.7,scaleX:0,ease:"power2.in"}),s.ZP.to(o.current[e],{duration:.7,scale:1,ease:"power2.in",backgroundColor:"#212121",color:"#edecf0"}))};return(0,r.jsx)("div",{className:"flex space-y-2 lg:space-x-6 flex-wrap lg:flex-nowrap items-center text-center",children:t.map((e,t)=>(0,r.jsxs)("button",{className:"px-4 py-2 rounded relative overflow-hidden font-semibold ".concat(e===a?"bg-gray-200 text-navbar":"bg-navbar text-gray-200"),ref:e=>{o.current[t]=e},onMouseEnter:()=>i(t),onMouseLeave:()=>d(t),onClick:()=>{l(e)},children:[(0,r.jsx)("div",{ref:e=>{c.current[t]=e},className:"absolute inset-0 bg-gray-200 transform origin-left ".concat(e===a?"scale-x-100":"scale-x-0")}),(0,r.jsx)("span",{className:"relative z-10",children:e})]},t))})},o=e=>{let{dates:t,selectedDate:a,onDateChange:n}=e;return(0,r.jsx)("div",{className:"flex flex-col md:flex-row justify-center items-center w-full",children:(0,r.jsx)(l,{dates:t,selectedDate:a,onDateChange:n})})},c=a(8865),i=a(5864),d=a(8472);let u="https://longhornlunch.pythonanywhere.com/",x=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{return(await axios.get(e)).data}catch(a){if(t>0)return console.warn("Retrying ... ".concat(5-t+1,"/").concat(5)),await new Promise(e=>setTimeout(e,1e3)),x(e,t-1);throw console.error("Max retries reached."),a}},f=async()=>{try{return(await d.Z.get("".concat(u,"/return_location_halls"))).data}catch(e){return console.error("Error fetching data",e),[]}},m=async e=>{try{return(await d.Z.get("".concat(u,"/return_dates/").concat(e))).data}catch(t){return console.error("Error fetching dates for dining hall ".concat(e,":"),t),[]}},h=async(e,t)=>{try{return(await d.Z.get("".concat(u,"/return_meals/").concat(e,"/").concat(t),{})).data}catch(a){return console.error("Error fetching menu data for dining hall ".concat(e," on date ").concat(t,":"),a),null}},g=async e=>{try{return(await d.Z.get("".concat(u,"/handle_upvote/").concat(e))).data.vote_count}catch(e){return console.error("Error upvoting the data."),null}},v=async e=>{try{return(await d.Z.get("".concat(u,"/handle_downvote/").concat(e))).data.vote_count}catch(e){return console.error("Error upvoting the data."),null}};var w=e=>{let{voteCount:t,id:a}=e,[l,o]=(0,n.useState)(t),[d,u]=(0,n.useState)("none"),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{s.p8.fromTo(x.current,{y:10,opacity:0},{y:0,opacity:1,duration:.25})},[l]);let f=e=>{let t=localStorage.getItem("voteStatus_".concat(e));return t?JSON.parse(t):null},m=(e,t)=>{localStorage.setItem("voteStatus_".concat(e),JSON.stringify(t))};(0,n.useEffect)(()=>{let e=f(a);e&&u(e)},[a]);let h=async()=>{if("upvoted"===d)o(await v(a)),u("none"),m(a,null);else{if("downvoted"===d){var e=await g(a);o(e=await g(a))}else{var e=await g(a);o(e)}u("upvoted"),m(a,"upvoted")}},w=async()=>{if("downvoted"===d)o(await g(a)),u("none"),m(a,null);else{if("upvoted"===d){var e=await v(a);o(e=await v(a))}else{var e=await v(a);o(e)}u("downvoted"),m(a,"downvoted")}};return(0,r.jsxs)("div",{className:"flex flex-row justify-center items-center gap-0.5",children:[(0,r.jsx)("button",{onClick:h,className:"".concat("upvoted"===d?"text-green-500":""," ").concat("upvoted"!==d?"hover:text-green-300":""," transition duration-200"),children:(0,r.jsx)(c.Z,{})}),(0,r.jsx)("p",{ref:x,children:l}),(0,r.jsx)("button",{onClick:w,className:"".concat("downvoted"===d?"text-red-500":""," ").concat("downvoted"!==d?"hover:text-red-300":""," transition duration-200"),children:(0,r.jsx)(i.Z,{})})]})},p=e=>{let{category:t,items:a}=e;return(0,r.jsxs)("div",{className:"menu-category",children:[(0,r.jsx)("h4",{className:"text-white font-semibold mt-4 text-center",children:t}),(0,r.jsx)("ul",{children:a.map((e,t)=>(0,r.jsxs)("li",{className:"flex flex-row justify-between items-center mt-3 text-gray-200 mx-3",children:[(0,r.jsx)("p",{children:e.name}),(0,r.jsx)(w,{id:e.id,voteCount:e.votes})]},t))})]})},y=e=>{let{mealType:t,categories:a}=e;return(0,r.jsxs)("div",{className:"rounded-xl bg-navbar w-4/5 lg:w-1/3 min-h-screen pb-3",children:[(0,r.jsx)("h1",{className:"text-white text-xl font-bold mt-3 text-center",children:t}),Object.keys(a).map(e=>(0,r.jsx)(p,{category:e,items:a[e]},e))]})};let j=e=>e?e.reduce((e,t)=>{let{meal_type:a,category:r}=t;return e[a]||(e[a]={}),e[a][r]||(e[a][r]=[]),e[a][r].push(t),e[a][r].sort((e,t)=>e.id-t.id),e},{}):{};var b=e=>{let{isLoading:t,menuData:a}=e,n=j(a),s=["Breakfast","Lunch","Dinner"],l=Object.keys(n).sort((e,t)=>s.indexOf(e)-s.indexOf(t));return t?(0,r.jsxs)("div",{className:"flex justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"loader"})," "]}):a&&0!=a.length?(0,r.jsxs)("div",{className:"w-3/4 my-12",children:[(0,r.jsx)("div",{className:"hidden lg:flex flex-row justify-between items-start gap-28 mx-4",children:l.map(e=>(0,r.jsx)(y,{mealType:e,categories:n[e]},e))}),(0,r.jsx)("div",{className:"lg:hidden flex flex-col justify-around items-center gap-12",children:l.map(e=>(0,r.jsx)(y,{mealType:e,categories:n[e]},e))})]}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center h-[75vh] text-gray-200"})},N=a(7138),E=a(7630),k=a(9504),S=a(6612),D=a(4839),_=a(6164);let C=S.fC,Z=S.xz,T=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:s=4,...l}=e;return(0,r.jsx)(S.VY,{ref:t,align:n,sideOffset:s,className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,_.m6)((0,D.W)(t))}("z-50 w-64 rounded-md border border-slate-200 bg-white p-4 text-slate-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",a),...l})});T.displayName=S.VY.displayName;var z=e=>{let{diningHalls:t,selectedDiningHall:a,onDiningHallsChange:l}=e,[o,c]=(0,n.useState)(!1),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{o?s.ZP.to(i.current,{duration:.5,rotate:180,ease:"bounce.out"}):s.ZP.to(i.current,{duration:0,rotate:0,ease:"power1.in"})},[o]),(0,n.useEffect)(()=>{let e=()=>{window.innerWidth>=768&&o&&c(!1)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[o]);let d=()=>{window.scrollTo({top:0,behavior:"smooth"})},u=e=>{d(),l(e),c(!1)};return(0,r.jsxs)("div",{className:"fixed top-0 left-0 w-full z-50",children:[(0,r.jsx)("nav",{className:"bg-navbar shadow-md",children:(0,r.jsxs)("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[(0,r.jsx)("div",{className:"flex items-center"}),(0,r.jsx)("div",{className:"hidden md:flex flex-grow items-center justify-center pl-4",children:(0,r.jsx)("div",{className:"flex space-x-2 md:space-x-6",children:t.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{u(e)},className:"sm:text-sm md:text-[14px] lg:text-[18px] text-ellipsis text-gray-500 hover:text-gray-200 transition duration-300 font-semibold focus:text-gray-200 cursor-pointer ".concat(e===a?"text-gray-200":"text-gray-500"),children:e},e))})}),(0,r.jsx)("div",{className:"hidden md:flex flex-row gap-2",children:(0,r.jsx)("div",{className:"text-gray-200 rounded-xl bg-custom px-4 py-2",children:(0,r.jsxs)(C,{children:[(0,r.jsx)(Z,{className:"cursor-default",children:"Note"}),(0,r.jsx)(T,{className:"mt-4 bg-navbar border-none text-gray-200",children:"Dining halls or dates may be missing due to them closing for the scheduled week or date."})]})})}),(0,r.jsx)("div",{className:"flex items-center md:hidden",children:(0,r.jsx)("button",{onClick:()=>c(!o),type:"button",className:"text-gray-400 hover:text-gray-200 focus:outline-none focus:text-gray-400 focus:hover:text-gray-200 transition duration-100","aria-label":"toggle menu",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",ref:i,children:o?(0,r.jsx)(E.Z,{}):(0,r.jsx)(k.Z,{})})})}),o&&(0,r.jsx)("div",{className:"fixed top-16 right-6 gap-6 bg-black shadow-lg rounded-lg p-6 z-50",children:(0,r.jsx)("div",{className:"flex flex-col items-start",children:t.map((e,t)=>(0,r.jsx)(N.default,{href:"/",className:"text-gray-400 font-semibold hover:text-gray-200 transition duration-300 ".concat(e===a?"text-gray-200":"text-gray-400"),onClick:()=>{u(e)},children:e},e))})})]})}),(0,r.jsx)("div",{className:"fixed bottom-4 right-4 shadow-md",children:(0,r.jsx)("div",{className:"text-gray-200 rounded-xl bg-navbar px-4 py-2",children:(0,r.jsxs)(C,{children:[(0,r.jsx)(Z,{className:"cursor-default",children:"Feedback"}),(0,r.jsx)(T,{className:"mt-4 bg-navbar border-none text-gray-200 mb-4 w-24",children:(0,r.jsx)("form",{action:"mailto:akhil.krishnamurthy2006@gmail.com",method:"GET",children:(0,r.jsx)("input",{type:"submit",placeholder:"Send email",className:"bg-navbar text-gray-200 outline-none text-center w-full"})})})]})})})]})};let O=()=>{(0,n.useEffect)(()=>{let e=()=>{localStorage.clear(),console.log("Local storage cleared at",new Date().toLocaleString()),window.location.reload()},t=()=>{let a=new Date;return setTimeout(()=>{e(),t()},new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0).getTime()-a.getTime())},a=t();return()=>clearTimeout(a)},[])};var P=a(2170),L=a.n(P);function R(){O();let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[l,c]=(0,n.useState)(null),[i,d]=(0,n.useState)(""),[u,x]=(0,n.useState)(""),[g,v]=(0,n.useState)(!0),w=(0,n.useRef)(L()(async(e,t)=>{v(!0);try{let a=await h(e,t);c(a)}catch(e){console.error("Error fetching menu data:",e),c(null)}finally{v(!1)}},300)).current;return(0,n.useEffect)(()=>{(async()=>{try{let e=await f();t(e),e.length>0&&d(e[0])}catch(e){console.error("Error fetching dining halls:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{if(i){v(!0);try{let e=(await m(i)).sort((e,t)=>{let a=new Date(Date.parse(e.replace(/^\w+,\s/,""))),r=new Date(Date.parse(t.replace(/^\w+,\s/,"")));return a.getTime()-r.getTime()});s(e),e.length>0&&x(e[0])}catch(e){console.error("Error fetching dates:",e)}finally{v(!1)}}})()},[i]),(0,n.useEffect)(()=>{i&&u&&w(i,u)},[i,u,w]),(0,r.jsxs)("main",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(z,{diningHalls:e,selectedDiningHall:i,onDiningHallsChange:d}),(0,r.jsxs)("div",{className:"relative top-[96px] md:top-[80px] flex flex-col items-center justify-center",children:[(0,r.jsxs)("div",{className:"flex flex-row w-full justify-center max-w-7xl px-4 items-center",children:[(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)("div",{className:"flex-1 flex justify-center",children:(0,r.jsx)(o,{dates:a,selectedDate:u,onDateChange:x})}),(0,r.jsx)("div",{className:"flex-1 flex justify-end"})]}),(0,r.jsx)(b,{isLoading:g,menuData:l})]})]})}}},function(e){e.O(0,[922,916,971,23,744],function(){return e(e.s=5997)}),_N_E=e.O()}]);